/*!
 * Created by Rajeshwar Patlolla https://github.com/rajeshwarpatlolla
 * Modified by Marko MarkoviÄ‡ <okram@civokram.com>
 */
"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.template"]).directive("ionicDatepicker",["$ionicPopup",function(e){return{restrict:"AE",replace:!0,scope:{value:"=",weekBeginsOnMonday:"=",min:"=",max:"="},link:function(t,a,i){var n=angular.copy(t.value)||new Date;t.highlightedDate=angular.copy(n),t.weekDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.weekBeginsOnMonday&&t.weekDays.push(t.weekDays.shift());var r=["January","February","March","April","May","June","July","August","September","October","November","December"];t.calendarRows=new Array(6),t.calendarCols=new Array(7);var o=function(e){t.dayList=[];for(var a=new Date(e.getFullYear(),e.getMonth(),1).getDate(),i=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),n=a;i>=n;n++){var o=new Date(e.getFullYear(),e.getMonth(),n);t.dayList.push({date:o,day:o.getDate()})}a=t.dayList[0].date.getDay(),t.weekBeginsOnMonday&&a--;for(var d=0;a>d;d++)t.dayList.unshift(void 0);t.currentMonth=r[e.getMonth()],t.currentYear=e.getFullYear()};t.prevMonth=function(){var e=new Date(n.getFullYear(),n.getMonth(),0);void 0!==t.min&&e<t.min||(n.setMonth(n.getMonth()-1),o(n))},t.nextMonth=function(){var e=new Date(n.getFullYear(),n.getMonth()+1,1);void 0!==t.max&&e>t.max||(n.setMonth(n.getMonth()+1),o(n))},t.highlightDate=function(e){if("undefined"!=typeof e){if(void 0!==t.min&&e<t.min)return;if(void 0!==t.max&&e>t.max)return;t.highlightedDate=angular.copy(e),n=e,o(n)}},t.isValidDay=function(e,a){var i=t.dayList[7*e+a];return"undefined"!=typeof i},t.isSelected=function(e,a){if(t.isValidDay(e,a)){var i=t.dayList[7*e+a];return i.date.toDateString()===t.highlightedDate.toDateString()}return!1},t.isToday=function(e,a){return t.isValidDay(e,a)?t.dayList[7*e+a].date.toDateString()===(new Date).toDateString():!1},t.isDisabled=function(e,a){if(t.isValidDay(e,a)){if(t.dayList[7*e+a].date<t.min)return!0;if(t.dayList[7*e+a].date>t.max)return!0}return!1},a.on("click",function(){o(n),e.show({templateUrl:"ionic-datepicker.template.html",title:"<strong>Select a date</strong>",subTitle:"",scope:t,buttons:[{text:'<i class="icon ion-close"></i>',type:"button-clear"},{text:"Today",onTap:function(e){var a=new Date;return void 0!==t.min&&a<t.min?void e.preventDefault():void 0!==t.max&&a>t.max?void e.preventDefault():(t.highlightDate(a),void(t.value=a))}},{text:'<i class="icon ion-checkmark"></i>',type:"button-positive",onTap:function(){t.highlightDate(t.highlightedDate),t.value=t.highlightedDate}}]})})}}}]),function(e){try{e=angular.module("ionic-datepicker.template")}catch(t){e=angular.module("ionic-datepicker.template",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker.template.html",'<div class=datepicker><div class=row><button class="col col-10 button-clear icon-left ion-chevron-left" ng-click=prevMonth()></button><div class="col col-80 text-center">{{ currentMonth }} &mdash; {{ currentYear }}</div><button class="col col-10 button-clear icon-right ion-chevron-right" ng-click=nextMonth()></button></div><div class=calendar><div class="row text-center"><div class=col ng-repeat="weekDay in weekDays track by $index" style="font-weight: bold">{{ weekDay | limitTo:1 }}</div></div><div style="height: 180px;"><div class="row text-center" ng-repeat="row in calendarRows track by $index"><div class=col ng-repeat="col in calendarCols track by $index" ng-class="{ \'day\': isValidDay($parent.$index, $index), \'selected\': isSelected($parent.$index, $index), \'today\': isToday($parent.$index, $index), \'disabled\': isDisabled($parent.$index, $index) }" ng-click="highlightDate(dayList[$parent.$index * 7 + $index].date)">{{ dayList[$parent.$index * 7 + $index].day }}</div></div></div></div></div>')}])}();